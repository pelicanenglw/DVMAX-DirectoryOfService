var allAssays = ds.IVLSMasterAssays.all();allAssays.length;var instruments = allAssays.distinctValues('device');instruments;ds.Instruments.remove();ds.Assays.remove();ds.Panels.remove();ds.PanelAssays.remove();var today = new Date();for (var i = 0; i < instruments.length; i++) {		var instrument = new ds.Instruments();		var myassays = ds.IVLSMasterAssays.query ('device == :1', instruments[i]);		var vendor = "IDEXX";	instrument.name = instruments[i];	instrument.vendor = vendor;	instrument.timeStamp = today;	instrument.save();		var distinctAssays = myassays.distinctValues('assayTypeCode');	var distinctNames = myassays.distinctValues ('assayName');		for (var y = 0; y < distinctAssays.length; y++) {				var assay = new ds.Assays();		assay.name = distinctNames[y];		assay.code = distinctAssays[y];		assay.instrument = instrument;		assay.timeStamp = today;														assay.save();		assay;		assay.instrument.vendor;	};		//make the panels		var currentInstrument = instruments[i];		if (currentInstrument == 'SNAPshot Dx') {					var currentPanels = ds.IVLSMasterPanels.query ('instrument == :1', 'SNAPShot');		//distinct panels		var distinctPanels = currentPanels.distinctValues('panel');				if (distinctPanels.length > 0){				for (var panelIterator = 0; panelIterator < distinctPanels.length; panelIterator++) {					var panel = new ds.Panels ();			panel.instrument = instrument;			panel.name = distinctPanels[panelIterator];			panel.timeStamp = today;			panel.save();			//for each panel we need to create a corresponding entries in panel items				var matchedPanels = ds.IVLSMasterPanels.query ('panel == :1', panel.name);						for (var j = 0; j < matchedPanels.length; j++) {								var panelAssay = new ds.PanelAssays();				panelAssay.panel = panel;				panelAssay.assay = matchedPanels.assay[j];				panelAssay.timestamp = today;						panelAssay.save();									};								};				};					} else {				//			raw collection of panels		var currentPanels = ds.IVLSMasterPanels.query ('instrument == :1', currentInstrument);		//distinct panels		var distinctPanels = currentPanels.distinctValues('panel');				if (distinctPanels.length > 0){				for (var panelIterator = 0; panelIterator < distinctPanels.length; panelIterator++) {					var panel = new ds.Panels ();			panel.instrument = instrument;			panel.name = distinctPanels[panelIterator];			panel.timeStamp = today;			panel.save();			//panel;						var matchedPanels = ds.IVLSMasterPanels.query ('panel == :1', panel.name);						for (var j = 0; j < matchedPanels.length; j++) {								var panelAssay = new ds.PanelAssays();				panelAssay.panel = panel;				panelAssay.assay = matchedPanels.assay[j];				panelAssay.timestamp = today;						panelAssay.save();									};								};				};			};				};